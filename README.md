# Smart Dialogue Creator

## Общие сведения

Плагин предназначен для удобного и быстрого создания диалоговых сценариев.

---

## Глобальные настройки

Их можно найти в настройках проекта во вкладке **Game - Smart Dialogue Settings**.

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/eb8e1f16-1b6e-43b1-a000-e8975416da35)

Здесь есть настройки системы диалогов (они изменяют глобальное поведение системы):
**Character Data Asset** - ассет всех персонажей, которые используются в проекте (подробнее про него ниже).

**Public vars Data Asset** - ассет всех публичных переменных, которые используются в проекте

Настройки управления:

**Cooldown Phrase Skip** - Таймаут после скипа одного диалога, на скип следующего.

**Can Skip Hold** - Можно ли пропустить диалог по зажатой кнопке.

**Skip Dialogue Hold Duration** - Время, которое нужно зажимать кнопку пропуска чтобы пропустить катсцену или блок диалогов.

**... Keys** - массивы кнопок для управления диалогом

И настройки редактора: 

- **Player Scroll Width** - ширина текста проигрывателя диалогов в редакторе (в режиме DEBUGGING MODE)

- **Duration symbols per second** - Рассчёт времени показа фразы. Длительность фраз задается при выборе пункта контекстного меню Set Duration of Phrases. Например если указано значение 15 символов в секунду то для фразы длиной в 60 символов задастся Duration=60/15=4.0

- **Min auto duration phrase** - Минимальное время показа фразы. Для коротких фраз. Длительность фраз задается при выборе пункта контекстного меню Set Duration of Phrases. Например если указано значение 2 то для фразы длиной в 20 символов задастся Duration = Max(60/15=1.33, 2.0) = 2.0. Это значение также используется только для редактора.

**Внимание!** Длительность фраз не изменяется сразу для всех диалогов. Это значение используется только для редактора, берется для автоматического задания длительности фраз ветки с помощью контекстного меню.

- **Clipboard to Phrase** - настройка вставки из буфера обмена меню текста в текстовое поле фразы. Настройка изменяется в редакторе, но тут тоже присутствует. 

- **Phrase Editing Mode** - настройка позволяет при выборе фразы сразу же включать редактирование текста. Настройка изменяется в редакторе, но тут тоже присутствует.

## Character Data Asset

Ассет, содержащий базу данных всех персонажей. Создать его можно, нажав ПКМ в контент браузере и выбрав **Smart Dialogue->Character Data Asset**

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/d46a0aef-b6bf-4bc5-90a5-fe27dd976327)

При открытии ассета откроется **Characters Editor**

---

## Characters Editor

Редактор предназначен для создания, связывания и группировки по категориям сущностей персонажей, используемых в диалогах.

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/70dc4004-0700-46f3-ad77-983800e99247)

1. **Toolbar Panel** - содержит кнопки создания категории (Add Category) и персонажа в выбранной категории (Add Character). Также располагается кнопка валидации данных (Validate), при нажатии на которую в Output Log выводятся ошибки (или All Ok)

2. **Categories** - список всех категорий. При нажатии ПКМ в этой панели можно добавить или удалить категорию.

3. **Workspace** - рабочая облась. Здесь отображаются все персонажи входящие в выбранную категорию.

![DragDropCharacters](https://github.com/NIK0666/SDC_Documentation/assets/11288703/f28f767d-9d4d-4712-abac-19b61e8b6fb0)

- Перетаскиванием можно менять порядок персонажей в категории.

- Можно сменить категорию персонажа, перетащив его на другой пункт списка категорий. 

- Нажав ПКМ по персонажу можно дублировать или удалить персонажа, а нажав ПКМ на пустую область можно добавить персонажа. 

- Кликнув левой кнопкой мыши три раза по заголовку категории, можно перреименовать категорию.

4. **Details** - при выборе персонажа здесь отображаются его параметры.

- **Character Id** - уникальный идентификатор персонажа (английскими буквами, без пробелов)

- **Character Name** - имя персонажа (локализованный текст)

- **Character Icon** - портрет персонажа 

- **Name Color** - цвет текста имени персонажа (используется в проигрывателе диалогов в редакторе)

- **Phrase Color** - цвет фона фразы персонажа (используется в редакторе, цвет фона узлов фраз)

- **Variables** - объект сета переменных персонажа (я позже уберу из области видимости этот параметр)

- **Character Asset** - ACharacter ассет персонажа, используемого в игре.

Еще, рядом с вкладкой **Details** имеется вкладка **Variables** (о ней написано тут).

---

## Public Vars Editor

Редактор предназначен для создания глобальных переменных, которые по каким-то причинам нельзя отнести к конкретным персонажам и которые можно использовать для записи каких-то глобальных состояний игры.

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/34286a95-22ae-4027-a7b4-3ce82e22f88b)

- Слева располагается список категорий. При нажатии ПКМ в этой панели можно добавить или удалить категорию.

- Справа располагается список переменных категорий **Variables** (о ней написано ниже)

## Variables

Панель управления переменными. Имеется в редакторе публичных переменных, в редакторе персонажей и в редакторе диалогов. 

Если не создан сет переменных, то панель выглядит так:

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/ee18f0ad-04a8-40fc-987f-0cd8b9ffa2db)

При нажатии на кнопку Create Variables Set создается пустой сет переменных и становится активной кнопка Add Variable. Кнопка Remove Variables Set позволяет удалить сет переменных.

При нажатии на Add variable появляется диалоговое окно создания переменной

![VariablesAdd-20231017-140213](https://github.com/NIK0666/SDC_Documentation/assets/11288703/ad0f16c9-3096-43dc-9250-3b112fb82d6a)

Нужно ввести имя для создаваемой переменной. Также имеется выпадающий список, где нужно выбрать тип переменной

После создания появляется новая запись в списке. 

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/f81931f2-dec8-4ea2-8b9a-1a89266bdee4)

Здесь можно:

1. Изменить тип переменной

2. Изменить имя переменной

3. Задать дефолтное значение переменной

4. Удалить переменную из сета

---

## Smart Dialogue (ассет)

Ассет, содержащий граф диалога. Создать его можно, нажав ПКМ в контент браузере и выбрав **Smart Dialogue->Smart Dialogue**

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/acb05a1a-0ea4-4c67-8f9d-86ca288ff1cb)

При открытии ассета откроется **Smart Dialogue Editor**

---

## Smart Dialogue Editor

Редактор предназначен для создания диалоговых сценариев.

![image](https://github.com/NIK0666/SDC_Documentation/assets/11288703/02083922-2956-4bfc-9ee1-9dffbd470aea)

Редактор имеет несколько режимов (1):

- **EDITING** - режим создания диалогов.

- **DEBUGGING** - режим проигрывания и отладки диалогов.

- **SEQUENCE** - режим для связывания катсцен с ветками диалогов.

Во всех режимах в редакторе отображается поле графа (2).
